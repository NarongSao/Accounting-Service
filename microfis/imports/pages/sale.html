<!--Index-->
<template name="Microfis_sale">
    <!--<div class="box-header with-border">
        <h3 class="box-title">
            {{> addNewButton}}
        </h3>
    </div>-->
    <!-- /.box-header -->

    <div class="box-body">
        {{> tabular table=tabularTable  class="table table-striped table-bordered table-condensed table-hover-pointer"}}

    </div>
    <!-- /.box-body -->
</template>

<!--Action-->
<template name="Microfis_saleAction">
    {{#columnAction align="right"}}
        <li><a href="#" class="js-update"><i class="fa fa-pencil"></i> {{_ "action.edit"}}</a></li>
        <li><a href="#" class="js-destroy"><i class="fa fa-remove"></i> {{_ "action.delete"}}</a></li>
        <li><a href="#" class="js-display"><i class="fa fa-eye"></i> {{_ "action.show"}}</a></li>
    {{/columnAction}}
</template>

<!--Insert-->
<template name="Microfis_saleNew">
    <div class="box-body">
        <div class="box-header with-border" style="text-align:center">
            <h3 class="box-title" style="display: inline">
                <!--Client Info-->
                <div class="text-bold">
                        {{#with customerDoc}}
                            <a href="#" class="js-display-disbursement">
                                {{_id}} : {{khSurname}} {{khGivenName}}</a>
                        {{/with}}
                </div>
            </h3>
        </div>
        {{#autoForm collection=collection id="Microfis_saleNew" type="insert"}}
        <div class="row">
            <div class="col-md-6">
                {{> afQuickField name="saleDate"}}
                {{> afQuickField name="transactionType"}}
                {{> afQuickField name="customerId" type="hidden" value=customerDoc._id}}
                {{> afQuickField name="purchaseId" options=purchaseOption}}
                    <div class="row">
                        <div class="col-md-6">
                            {{> afQuickField name="price" value=price}}
                        </div>
                        <div class="col-md-6">
                            {{> afQuickField name="priceInKH"}}
                        </div>

                    </div>

                <div class="row">
                        <div class="col-md-6">
                            {{> afQuickField name="paid"}}
                        </div>
                        <div class="col-md-6">
                            {{> afQuickField name="paidInKH" value=priceInKH}}
                        </div>
                    </div>
                <div class="row">
                        <div class="col-md-6">
                            {{> afQuickField name="remaining" value=remaining readonly=true}}
                        </div>
                        <div class="col-md-6">
                            {{> afQuickField name="remainingInKH"}}
                        </div>

                    </div>
                {{> afQuickField name="branchId" type="hidden" value=currentBranch}}
            </div>
            <div class="col-md-6">
                {{> afQuickField name="description"}}
            </div>
        </div>
        {{> formFooterWithButton}}
    {{/autoForm}}
</div>
</template>

<!--Update-->
<template name="Microfis_saleEdit">
    <div class="box-body">
        <div class="box-header with-border" style="text-align:center">
            <h3 class="box-title" style="display: inline">
                <!--Client Info-->
                <div class="text-bold">
                    {{#with customerDoc}}
                        <a href="#" class="js-display-disbursement">
                            {{_id}} : {{khSurname}} {{khGivenName}}</a>
                    {{/with}}
                </div>
            </h3>
        </div>
        {{#autoForm collection=collection id="Microfis_saleEdit" doc=this type="update"}}
        <div class="row">
            <div class="col-md-6">
                {{> afQuickField name="saleDate"}}
                {{> afQuickField name="transactionType"}}
                {{> afQuickField name="customerId" type="hidden"}}
                {{> afQuickField name="purchaseId" options=purchaseOption}}
                <div class="row">
                    <div class="col-md-6">
                        {{> afQuickField name="price" value=price}}
                    </div>
                    <div class="col-md-6">
                        {{> afQuickField name="priceInKH"}}
                    </div>

                </div>

                <div class="row">
                    <div class="col-md-6">
                        {{> afQuickField name="paid"}}
                    </div>
                    <div class="col-md-6">
                        {{> afQuickField name="paidInKH"}}
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6">
                        {{> afQuickField name="remaining" value=remaining readonly=true}}
                    </div>
                    <div class="col-md-6">
                        {{> afQuickField name="remainingInKH"}}
                    </div>

                </div>
                {{> afQuickField name="branchId" type="hidden" value=currentBranch}}
            </div>
            <div class="col-md-6">
                {{> afQuickField name="description"}}
            </div>
        </div>

        {{> formFooterWithButton}}
    {{/autoForm}}
</div>
</template>

<!--Show-->
<template name="Microfis_saleShow">
    <div class="box-body">
    <dl class="dl-horizontal">
        <dt>Id</dt>
        <dd>{{_id}}</dd>
        <dt>Date</dt>
        <dd>{{moFormat saleDate "DD/MM/YYYY"}}</dd>
        <dt>Transaction Type</dt>
        <dd>{{transactionType}}</dd>
        <dt>Customer Id</dt>
        <dd>{{customerId}}</dd>
        <dt>Purchase Id</dt>
        <dd>{{purchaseId}}</dd>
        <dt>Price</dt>
        <dd>{{numFormat price "(0,000.00)"}}</dd>
        <dt>Paid</dt>
        <dd>{{numFormat paid "(0,000.00)"}}</dd>
        <dt>Remain</dt>
        <dd>{{numFormat remaining "(0,000.00)"}}</dd>
    </dl>
</div>
</template>
